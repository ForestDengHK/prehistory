---
import '../styles/pagination.css';

interface Props {
  currentPage: number;
  totalPages: number;
  baseUrl?: string;
}

const { currentPage, totalPages, baseUrl = '' } = Astro.props;

function createPagination(totalPages: number, currentPage: number) {
  const pages = [];
  for (let i = 1; i <= totalPages; i++) {
    pages.push({
      number: i,
      isCurrent: i === currentPage,
    });
  }
  return pages;
}

const pagination = createPagination(totalPages, currentPage);
const prevPage = Math.max(1, currentPage - 1);
const nextPage = Math.min(totalPages, currentPage + 1);
---

{pagination.length > 1 && (
  <div class="pagination">
    <a
      href={`${baseUrl}?page=${prevPage}`}
      class={`nav-link prev ${currentPage === 1 ? 'disabled' : ''}`}
      aria-label="Previous page"
    >
      <span class="arrow">←</span><span class="text">Prev</span>
    </a>
    {pagination.map(pageItem =>
      pageItem.isCurrent
        ? <span class="current" aria-current="page">{pageItem.number}</span>
        : <a href={`${baseUrl}?page=${pageItem.number}`} aria-label={`Page ${pageItem.number}`}>{pageItem.number}</a>
    )}
    <a
      href={`${baseUrl}?page=${nextPage}`}
      class={`nav-link next ${currentPage === totalPages ? 'disabled' : ''}`}
      aria-label="Next page"
    >
      <span class="text">Next</span><span class="arrow">→</span>
    </a>
  </div>
)}

<!-- Styles imported from ../styles/pagination.css -->
