---
import { creatures } from '../data/creatures';

// Function to get random creatures
function getRandomCreatures(count: number) {
	const shuffled = [...creatures].sort(() => 0.5 - Math.random());
	return shuffled.slice(0, count);
}

// Function to truncate description by word count
function truncateDescription(description: string) {
	const words = description.split(' ');
	if (words.length <= 20) return description;
	return words.slice(0, 20).join(' ') + ' ...';
}

const featuredCreatures = getRandomCreatures(3).map(creature => ({
	name: creature.name,
	period: creature.period,
	image: creature.image,
	description: truncateDescription(creature.description),
	id: creature.id
}));
---

<div class="creatures-grid">
	{featuredCreatures.map(creature => (
		<div class="creature-card">
			<div class="creature-image">
				<img src={creature.image} alt={creature.name} />
			</div>
			<div class="creature-info">
				<h3>{creature.name}</h3>
				<p class="period">{creature.period}</p>
				<p class="description">{creature.description}</p>
				<a href={`/creature/${creature.id}`} class="learn-more">
					Learn More
				</a>
			</div>
		</div>
	))}
</div>

<style>
	.creatures-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 2rem;
	}

	.creature-card {
		background: white;
		border-radius: 8px;
		overflow: hidden;
		box-shadow: 0 2px 4px rgba(0,0,0,0.1);
		transition: transform 0.3s ease;
	}

	.creature-card:hover {
		transform: translateY(-5px);
	}

	.creature-image {
		height: 200px;
		overflow: hidden;
	}

	.creature-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.creature-info {
		padding: 1.5rem;
	}

	h3 {
		color: var(--primary-color);
		margin-bottom: 0.5rem;
	}

	.period {
		color: var(--accent-color);
		font-weight: bold;
		margin-bottom: 1rem;
	}

	.description {
		margin-bottom: 1.5rem;
	}

	.learn-more {
		display: inline-block;
		padding: 0.5rem 1rem;
		background: var(--primary-color);
		color: white;
		text-decoration: none;
		border-radius: 4px;
		transition: background 0.3s ease;
	}

	.learn-more:hover {
		background: var(--accent-color);
	}
</style>